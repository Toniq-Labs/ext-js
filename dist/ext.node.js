/*! For license information please see ext.node.js.LICENSE.txt */
!function webpackUniversalModuleDefinition(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(global,(function(){return(()=>{var e={"./index.js":(e,t,a)=>{e.exports=a("./src/extjs.js")},"./src/RosettaApi.js":(e,t,a)=>{"use strict";a.r(t),a.d(t,{RosettaErrorType:()=>d,RosettaError:()=>RosettaError,Transaction:()=>Transaction,default:()=>RosettaApi});var r=a("axios"),n=a.n(r),o=a("bignumber.js"),s=a.n(o),i=a("json-bigint");const c=a.n(i)()({strict:!0}),d=Object.freeze({NotFound:0,Timeout:1,NetworkError:2});class RosettaError extends Error{constructor(e,t){switch(super(e),t){case 408:this.errorType=d.Timeout;break;case 500:this.errorType=d.NotFound;break;default:this.errorType=d.NetworkError}}}class Transaction{constructor(e,t){this.blockIndex=t,this.hash=e.transaction_identifier.hash;const a=e.metadata.timestamp.div(1e6).toNumber();this.timestamp=new Date(a);const r=e.operations;r.length>=1?(this.type=r[0].type,this.status=r[0].status,this.account1Address=r[0].account.address,this.amount=new(s())(r[0].amount.value),"TRANSACTION"!==r[0].type&&"BURN"!==r[0].type||this.amount.isZero()||(this.amount=this.amount.negated())):(this.type="",this.status="",this.account1Address="",this.amount=new(s())(0)),r.length>=2&&"TRANSACTION"===r[1].type?this.account2Address=r[1].account.address:this.account2Address="",r.length>=3&&"FEE"===r[2].type?this.fee=new(s())(-r[2].amount.value):this.fee=new(s())(0),this.memo=new(s())(e.metadata.memo)}}class RosettaApi{constructor(){this.axios=n().create({baseURL:"https://rosetta-api.internetcomputer.org/",method:"post",transformRequest:e=>c.stringify(e),transformResponse:e=>c.parse(e),headers:{"Content-Type":"application/json;charset=utf-8"}}),this.networkIdentifier=this.networksList().then((e=>e.network_identifiers.find((e=>"Internet Computer"===e.blockchain))))}async getAccountBalance(e){try{const t=await this.accountBalanceByAddress(e);return new(s())(t.balances[0].value)}catch(e){return new RosettaError(e.message,n().isAxiosError(e)?e?.response?.status:void 0)}}async getLastBlockIndex(){try{return(await this.networkStatus()).current_block_identifier.index}catch(e){return new RosettaError(e.message,n().isAxiosError(e)?e?.response?.status:void 0)}}async getTransaction(e){try{const t=await this.transactionsByHash(e);return 0===t.transactions.length?new RosettaError("Transaction not found.",500):new Transaction(t.transactions[0].transaction,t.transactions[0].block_identifier.index)}catch(e){return new RosettaError(e.message,n().isAxiosError(e)?e?.response?.status:void 0)}}async getTransactions(e,t,a){try{let r;if(t)r=t;else{r=(await this.networkStatus()).current_block_identifier.index}a&&(r=Math.max(r-a,-1));const n=Math.min(e,r+1),o=[];for(let e=0;e<n;e++)o.push(await this.getTransactionByBlock(r-e));return o}catch(e){return new RosettaError(e.message,n().isAxiosError(e)?e?.response?.status:void 0)}}async getTransactionsByAccount(e){try{const t=await this.transactionsByAccount(e);return(await Promise.all(t.transactions.map((e=>new Transaction(e.transaction,e.block_identifier.index))))).reverse()}catch(e){return new RosettaError(e.message,n().isAxiosError(e)?e?.response?.status:void 0)}}async getTransactionByBlock(e){const t=await this.blockByIndex(e);return new Transaction(t.block.transactions[0],e)}async request(e,t){return(await this.axios.request({url:e,data:t})).data}networksList(){return this.request("/network/list",{})}async networkStatus(){const e=await this.networkIdentifier;return this.request("/network/status",{network_identifier:e})}async accountBalanceByAddress(e){const t=await this.networkIdentifier;return this.request("/account/balance",{network_identifier:t,account_identifier:{address:e}})}async blockByIndex(e){const t=await this.networkIdentifier;return this.request("/block",{network_identifier:t,block_identifier:{index:e}})}async transactionsByAccount(e){const t=await this.networkIdentifier;return this.request("/search/transactions",{network_identifier:t,account_identifier:{address:e}})}async transactionsByHash(e){const t=await this.networkIdentifier;return this.request("/search/transactions",{network_identifier:t,transaction_identifier:{hash:e}})}}},"./src/candid/ext.did.js":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__,init:()=>init});const __WEBPACK_DEFAULT_EXPORT__=({IDL:e})=>{const t=e.Text,a=e.Text,r=e.Variant({principal:e.Principal,address:a}),n=e.Record({token:t,owner:r,spender:e.Principal}),o=e.Nat,s=o,i=e.Variant({InvalidToken:t,Other:e.Text}),c=i,d=e.Variant({ok:s,err:c}),u=e.Vec(e.Nat8),l=e.Record({token:t,subaccount:e.Opt(u),allowance:o,spender:e.Principal}),_=e.Record({token:t,user:r}),p=e.Variant({ok:o,err:i}),m=t,N=a,f=e.Variant({ok:N,err:c}),y=e.Text,h=e.Nat32,g=e.Variant({fungible:e.Record({decimals:e.Nat8,metadata:e.Opt(e.Vec(e.Nat8)),name:e.Text,symbol:e.Text}),nonfungible:e.Record({metadata:e.Opt(e.Vec(e.Nat8))})}),R=e.Variant({ok:g,err:c}),b=e.Record({to:r,metadata:e.Opt(e.Vec(e.Nat8))}),w=e.Vec(e.Nat8),T=e.Record({to:r,token:t,notify:e.Bool,from:r,memo:w,subaccount:e.Opt(u),amount:o}),k=e.Variant({ok:o,err:e.Variant({CannotNotify:a,InsufficientBalance:e.Null,InvalidToken:t,Rejected:e.Null,Unauthorized:a,Other:e.Text})});return e.Service({acceptCycles:e.Func([],[],[]),allowance:e.Func([n],[d],["query"]),approve:e.Func([l],[],[]),availableCycles:e.Func([],[e.Nat],["query"]),balance:e.Func([_],[p],["query"]),bearer:e.Func([m],[f],["query"]),extensions:e.Func([],[e.Vec(y)],["query"]),getAllowances:e.Func([],[e.Vec(e.Tuple(h,e.Principal))],["query"]),getMinter:e.Func([],[e.Principal],["query"]),getRegistry:e.Func([],[e.Vec(e.Tuple(h,N))],["query"]),getTokens:e.Func([],[e.Vec(e.Tuple(h,g))],["query"]),metadata:e.Func([m],[R],["query"]),mintNFT:e.Func([b],[h],[]),setMinter:e.Func([e.Principal],[],[]),supply:e.Func([m],[d],["query"]),transfer:e.Func([T],[k],[])})},init=({IDL:e})=>[e.Principal]},"./src/candid/governance.did.js":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__,init:()=>init});const __WEBPACK_DEFAULT_EXPORT__=({IDL:e})=>{const t=e.Rec(),a=e.Record({id:e.Nat64}),r=e.Record({followees:e.Vec(a)}),n=e.Record({id:e.Opt(e.Principal)}),o=e.Record({neuron_minimum_stake_e8s:e.Nat64,max_proposals_to_keep_per_topic:e.Nat32,neuron_management_fee_per_proposal_e8s:e.Nat64,reject_cost_e8s:e.Nat64,transaction_fee_e8s:e.Nat64,neuron_spawn_dissolve_delay_seconds:e.Nat64,minimum_icp_xdr_rate:e.Nat64,maximum_node_provider_rewards_e8s:e.Nat64}),s=e.Record({day_after_genesis:e.Nat64,actual_timestamp_seconds:e.Nat64,distributed_e8s_equivalent:e.Nat64,settled_proposals:e.Vec(a)}),i=e.Record({to_subaccount:e.Vec(e.Nat8),neuron_stake_e8s:e.Nat64,from:e.Opt(e.Principal),memo:e.Nat64,from_subaccount:e.Vec(e.Nat8),transfer_timestamp:e.Nat64,block_height:e.Nat64}),c=e.Record({error_message:e.Text,error_type:e.Int32}),d=e.Record({vote:e.Int32,voting_power:e.Nat64}),u=e.Record({no:e.Nat64,yes:e.Nat64,total:e.Nat64,timestamp_seconds:e.Nat64}),l=e.Record({new_controller:e.Opt(e.Principal)}),_=e.Record({amount_e8s:e.Nat64}),p=e.Record({topic:e.Int32,followees:e.Vec(a)}),m=e.Record({hot_key_to_remove:e.Opt(e.Principal)}),N=e.Record({new_hot_key:e.Opt(e.Principal)}),f=e.Record({additional_dissolve_delay_seconds:e.Nat32}),y=e.Record({dissolve_timestamp_seconds:e.Nat64}),h=e.Variant({RemoveHotKey:m,AddHotKey:N,StopDissolving:e.Record({}),StartDissolving:e.Record({}),IncreaseDissolveDelay:f,SetDissolveTimestamp:y}),g=e.Record({operation:e.Opt(h)}),R=e.Record({vote:e.Int32,proposal:e.Opt(a)}),b=e.Record({dissolve_delay_seconds:e.Nat64,kyc_verified:e.Bool,amount_e8s:e.Nat64,new_controller:e.Opt(e.Principal),nonce:e.Nat64}),w=e.Record({hash:e.Vec(e.Nat8)}),T=e.Record({e8s:e.Nat64}),k=e.Record({to_account:e.Opt(w),amount:e.Opt(T)}),v=e.Variant({Spawn:l,Split:_,Follow:p,Configure:g,RegisterVote:R,DisburseToNeuron:b,MakeProposal:t,Disburse:k}),x=e.Record({id:e.Opt(a),command:e.Opt(v)}),O=e.Record({nns_function:e.Int32,payload:e.Vec(e.Nat8)}),I=e.Record({dissolve_delay_seconds:e.Nat64}),V=e.Record({to_account:e.Opt(w)}),A=e.Variant({RewardToNeuron:I,RewardToAccount:V}),S=e.Record({node_provider:e.Opt(n),reward_mode:e.Opt(A),amount_e8s:e.Nat64}),q=e.Record({default_followees:e.Vec(e.Tuple(e.Int32,r))}),P=e.Record({principals:e.Vec(e.Principal)}),E=e.Variant({ToRemove:n,ToAdd:n}),F=e.Record({change:e.Opt(E)}),D=e.Record({motion_text:e.Text}),C=e.Variant({ManageNeuron:x,ExecuteNnsFunction:O,RewardNodeProvider:S,SetDefaultFollowees:q,ManageNetworkEconomics:o,ApproveGenesisKyc:P,AddOrRemoveNodeProvider:F,Motion:D});t.fill(e.Record({url:e.Text,action:e.Opt(C),summary:e.Text}));const j=e.Record({id:e.Opt(a),failure_reason:e.Opt(c),ballots:e.Vec(e.Tuple(e.Nat64,d)),proposal_timestamp_seconds:e.Nat64,reward_event_round:e.Nat64,failed_timestamp_seconds:e.Nat64,reject_cost_e8s:e.Nat64,latest_tally:e.Opt(u),decided_timestamp_seconds:e.Nat64,proposal:e.Opt(t),proposer:e.Opt(a),executed_timestamp_seconds:e.Nat64}),B=e.Record({controller:e.Opt(e.Principal),memo:e.Nat64}),L=e.Variant({Spawn:l,Split:_,ClaimOrRefresh:B,DisburseToNeuron:b,Disburse:k}),M=e.Record({command:e.Opt(L),timestamp:e.Nat64}),H=e.Record({vote:e.Int32,proposal_id:e.Opt(a)}),z=e.Variant({DissolveDelaySeconds:e.Nat64,WhenDissolvedTimestampSeconds:e.Nat64}),U=e.Record({id:e.Opt(a),controller:e.Opt(e.Principal),recent_ballots:e.Vec(H),kyc_verified:e.Bool,not_for_profit:e.Bool,maturity_e8s_equivalent:e.Nat64,cached_neuron_stake_e8s:e.Nat64,created_timestamp_seconds:e.Nat64,aging_since_timestamp_seconds:e.Nat64,hot_keys:e.Vec(e.Principal),account:e.Vec(e.Nat8),dissolve_state:e.Opt(z),followees:e.Vec(e.Tuple(e.Int32,r)),neuron_fees_e8s:e.Nat64,transfer:e.Opt(i)}),G=(e.Record({default_followees:e.Vec(e.Tuple(e.Int32,r)),wait_for_quiet_threshold_seconds:e.Nat64,node_providers:e.Vec(n),economics:e.Opt(o),latest_reward_event:e.Opt(s),to_claim_transfers:e.Vec(i),short_voting_period_seconds:e.Nat64,proposals:e.Vec(e.Tuple(e.Nat64,j)),in_flight_commands:e.Vec(e.Tuple(e.Nat64,M)),neurons:e.Vec(e.Tuple(e.Nat64,U)),genesis_timestamp_seconds:e.Nat64}),e.Variant({Ok:e.Null,Err:c})),K=e.Variant({Error:c,NeuronId:a}),W=e.Record({result:e.Opt(K)}),Y=e.Variant({Ok:U,Err:c}),Z=e.Record({dissolve_delay_seconds:e.Nat64,recent_ballots:e.Vec(H),created_timestamp_seconds:e.Nat64,state:e.Int32,retrieved_at_timestamp_seconds:e.Nat64,voting_power:e.Nat64,age_seconds:e.Nat64}),J=e.Variant({Ok:Z,Err:c}),$=e.Record({id:e.Opt(a),status:e.Int32,topic:e.Int32,failure_reason:e.Opt(c),ballots:e.Vec(e.Tuple(e.Nat64,d)),proposal_timestamp_seconds:e.Nat64,reward_event_round:e.Nat64,failed_timestamp_seconds:e.Nat64,reject_cost_e8s:e.Nat64,latest_tally:e.Opt(u),reward_status:e.Int32,decided_timestamp_seconds:e.Nat64,proposal:e.Opt(t),proposer:e.Opt(a),executed_timestamp_seconds:e.Nat64}),Q=e.Record({neuron_ids:e.Vec(e.Nat64),include_neurons_readable_by_caller:e.Bool}),X=e.Record({neuron_infos:e.Vec(e.Tuple(e.Nat64,Z)),full_neurons:e.Vec(U)}),ee=e.Record({include_reward_status:e.Vec(e.Int32),before_proposal:e.Opt(a),limit:e.Nat32,exclude_topic:e.Vec(e.Int32),include_status:e.Vec(e.Int32)}),te=e.Record({proposal_info:e.Vec($)}),ae=e.Record({created_neuron_id:e.Opt(a)}),re=e.Record({proposal_id:e.Opt(a)}),ne=e.Record({transfer_block_height:e.Nat64}),oe=e.Variant({Error:c,Spawn:ae,Split:ae,Follow:e.Record({}),Configure:e.Record({}),RegisterVote:e.Record({}),DisburseToNeuron:ae,MakeProposal:re,Disburse:ne}),se=e.Record({command:e.Opt(oe)});return e.Service({claim_gtc_neurons:e.Func([e.Principal,e.Vec(a)],[G],[]),claim_or_refresh_neuron_from_account:e.Func([B],[W],[]),get_full_neuron:e.Func([e.Nat64],[Y],["query"]),get_neuron_ids:e.Func([],[e.Vec(e.Nat64)],["query"]),get_neuron_info:e.Func([e.Nat64],[J],["query"]),get_pending_proposals:e.Func([],[e.Vec($)],["query"]),get_proposal_info:e.Func([e.Nat64],[e.Opt($)],["query"]),list_neurons:e.Func([Q],[X],["query"]),list_proposals:e.Func([ee],[te],["query"]),manage_neuron:e.Func([x],[se],[]),transfer_gtc_neuron:e.Func([a,a],[G],[])})},init=({IDL:e})=>{const t=e.Rec(),a=e.Record({id:e.Nat64}),r=e.Record({followees:e.Vec(a)}),n=e.Record({id:e.Opt(e.Principal)}),o=e.Record({neuron_minimum_stake_e8s:e.Nat64,max_proposals_to_keep_per_topic:e.Nat32,neuron_management_fee_per_proposal_e8s:e.Nat64,reject_cost_e8s:e.Nat64,transaction_fee_e8s:e.Nat64,neuron_spawn_dissolve_delay_seconds:e.Nat64,minimum_icp_xdr_rate:e.Nat64,maximum_node_provider_rewards_e8s:e.Nat64}),s=e.Record({day_after_genesis:e.Nat64,actual_timestamp_seconds:e.Nat64,distributed_e8s_equivalent:e.Nat64,settled_proposals:e.Vec(a)}),i=e.Record({to_subaccount:e.Vec(e.Nat8),neuron_stake_e8s:e.Nat64,from:e.Opt(e.Principal),memo:e.Nat64,from_subaccount:e.Vec(e.Nat8),transfer_timestamp:e.Nat64,block_height:e.Nat64}),c=e.Record({error_message:e.Text,error_type:e.Int32}),d=e.Record({vote:e.Int32,voting_power:e.Nat64}),u=e.Record({no:e.Nat64,yes:e.Nat64,total:e.Nat64,timestamp_seconds:e.Nat64}),l=e.Record({new_controller:e.Opt(e.Principal)}),_=e.Record({amount_e8s:e.Nat64}),p=e.Record({topic:e.Int32,followees:e.Vec(a)}),m=e.Record({hot_key_to_remove:e.Opt(e.Principal)}),N=e.Record({new_hot_key:e.Opt(e.Principal)}),f=e.Record({additional_dissolve_delay_seconds:e.Nat32}),y=e.Record({dissolve_timestamp_seconds:e.Nat64}),h=e.Variant({RemoveHotKey:m,AddHotKey:N,StopDissolving:e.Record({}),StartDissolving:e.Record({}),IncreaseDissolveDelay:f,SetDissolveTimestamp:y}),g=e.Record({operation:e.Opt(h)}),R=e.Record({vote:e.Int32,proposal:e.Opt(a)}),b=e.Record({dissolve_delay_seconds:e.Nat64,kyc_verified:e.Bool,amount_e8s:e.Nat64,new_controller:e.Opt(e.Principal),nonce:e.Nat64}),w=e.Record({hash:e.Vec(e.Nat8)}),T=e.Record({e8s:e.Nat64}),k=e.Record({to_account:e.Opt(w),amount:e.Opt(T)}),v=e.Variant({Spawn:l,Split:_,Follow:p,Configure:g,RegisterVote:R,DisburseToNeuron:b,MakeProposal:t,Disburse:k}),x=e.Record({id:e.Opt(a),command:e.Opt(v)}),O=e.Record({nns_function:e.Int32,payload:e.Vec(e.Nat8)}),I=e.Record({dissolve_delay_seconds:e.Nat64}),V=e.Record({to_account:e.Opt(w)}),A=e.Variant({RewardToNeuron:I,RewardToAccount:V}),S=e.Record({node_provider:e.Opt(n),reward_mode:e.Opt(A),amount_e8s:e.Nat64}),q=e.Record({default_followees:e.Vec(e.Tuple(e.Int32,r))}),P=e.Record({principals:e.Vec(e.Principal)}),E=e.Variant({ToRemove:n,ToAdd:n}),F=e.Record({change:e.Opt(E)}),D=e.Record({motion_text:e.Text}),C=e.Variant({ManageNeuron:x,ExecuteNnsFunction:O,RewardNodeProvider:S,SetDefaultFollowees:q,ManageNetworkEconomics:o,ApproveGenesisKyc:P,AddOrRemoveNodeProvider:F,Motion:D});t.fill(e.Record({url:e.Text,action:e.Opt(C),summary:e.Text}));const j=e.Record({id:e.Opt(a),failure_reason:e.Opt(c),ballots:e.Vec(e.Tuple(e.Nat64,d)),proposal_timestamp_seconds:e.Nat64,reward_event_round:e.Nat64,failed_timestamp_seconds:e.Nat64,reject_cost_e8s:e.Nat64,latest_tally:e.Opt(u),decided_timestamp_seconds:e.Nat64,proposal:e.Opt(t),proposer:e.Opt(a),executed_timestamp_seconds:e.Nat64}),B=e.Record({controller:e.Opt(e.Principal),memo:e.Nat64}),L=e.Variant({Spawn:l,Split:_,ClaimOrRefresh:B,DisburseToNeuron:b,Disburse:k}),M=e.Record({command:e.Opt(L),timestamp:e.Nat64}),H=e.Record({vote:e.Int32,proposal_id:e.Opt(a)}),z=e.Variant({DissolveDelaySeconds:e.Nat64,WhenDissolvedTimestampSeconds:e.Nat64}),U=e.Record({id:e.Opt(a),controller:e.Opt(e.Principal),recent_ballots:e.Vec(H),kyc_verified:e.Bool,not_for_profit:e.Bool,maturity_e8s_equivalent:e.Nat64,cached_neuron_stake_e8s:e.Nat64,created_timestamp_seconds:e.Nat64,aging_since_timestamp_seconds:e.Nat64,hot_keys:e.Vec(e.Principal),account:e.Vec(e.Nat8),dissolve_state:e.Opt(z),followees:e.Vec(e.Tuple(e.Int32,r)),neuron_fees_e8s:e.Nat64,transfer:e.Opt(i)});return[e.Record({default_followees:e.Vec(e.Tuple(e.Int32,r)),wait_for_quiet_threshold_seconds:e.Nat64,node_providers:e.Vec(n),economics:e.Opt(o),latest_reward_event:e.Opt(s),to_claim_transfers:e.Vec(i),short_voting_period_seconds:e.Nat64,proposals:e.Vec(e.Tuple(e.Nat64,j)),in_flight_commands:e.Vec(e.Tuple(e.Nat64,M)),neurons:e.Vec(e.Tuple(e.Nat64,U)),genesis_timestamp_seconds:e.Nat64})]}},"./src/candid/hzld.did.js":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__,init:()=>init});const __WEBPACK_DEFAULT_EXPORT__=({IDL:e})=>{const t=e.Principal,a=e.Record({user:t}),r=e.Nat,n=e.Vec(e.Nat8),o=e.Record({to:t,metadata:e.Opt(n),from:t,amount:r}),s=e.Variant({ok:e.Null,err:e.Variant({InsufficientBalance:e.Null,InvalidSource:t,Unauthorized:e.Null})}),i=e.Variant({removeOperator:e.Null,setOperator:e.Null}),c=e.Record({owner:t,operators:e.Vec(e.Tuple(t,i))}),d=e.Variant({ok:e.Null,err:e.Variant({Unauthorized:e.Null,InvalidOwner:t})});return e.Service({getBalance:e.Func([a],[e.Opt(r)],[]),getBalanceInsecure:e.Func([a],[e.Opt(r)],["query"]),getCommunityChestValueInsecure:e.Func([],[e.Opt(e.Nat)],["query"]),getInfo:e.Func([],[e.Record({balance:e.Nat,maxLiveSize:e.Nat,heap:e.Nat,size:e.Nat})],["query"]),getNumberOfAccounts:e.Func([],[e.Nat],[]),getTokenInfo:e.Func([],[e.Record({fee:e.Nat,totalMinted:e.Nat,totalSupply:e.Nat,totalTransactions:e.Nat})],["query"]),getTotalMinted:e.Func([],[e.Nat],[]),mint:e.Func([e.Principal,e.Nat],[],[]),transfer:e.Func([o],[s],[]),updateOperator:e.Func([e.Vec(c)],[d],[])})},init=({IDL:e})=>[]},"./src/candid/ledger.did.js":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__,init:()=>init});const __WEBPACK_DEFAULT_EXPORT__=({IDL:e})=>{const t=e.Text,a=e.Record({secs:e.Nat64,nanos:e.Nat32}),r=e.Record({max_message_size_bytes:e.Opt(e.Nat32),node_max_memory_size_bytes:e.Opt(e.Nat32),controller_id:e.Principal}),n=e.Record({e8s:e.Nat64}),o=(e.Record({send_whitelist:e.Vec(e.Tuple(e.Principal)),minting_account:t,transaction_window:e.Opt(a),max_message_size_bytes:e.Opt(e.Nat32),archive_options:e.Opt(r),initial_values:e.Vec(e.Tuple(t,n))}),e.Record({account:t})),s=e.Vec(e.Nat8),i=e.Nat64,c=e.Record({to_subaccount:e.Opt(s),from_subaccount:e.Opt(s),to_canister:e.Principal,max_fee:n,block_height:i}),d=e.Nat64,u=e.Record({timestamp_nanos:e.Nat64}),l=e.Record({to:t,fee:n,memo:d,from_subaccount:e.Opt(s),created_at_time:e.Opt(u),amount:n});return e.Service({account_balance_dfx:e.Func([o],[n],["query"]),notify_dfx:e.Func([c],[],[]),send_dfx:e.Func([l],[i],[])})},init=({IDL:e})=>{const t=e.Text,a=e.Record({secs:e.Nat64,nanos:e.Nat32}),r=e.Record({max_message_size_bytes:e.Opt(e.Nat32),node_max_memory_size_bytes:e.Opt(e.Nat32),controller_id:e.Principal}),n=e.Record({e8s:e.Nat64});return[e.Record({send_whitelist:e.Vec(e.Tuple(e.Principal)),minting_account:t,transaction_window:e.Opt(a),max_message_size_bytes:e.Opt(e.Nat32),archive_options:e.Opt(r),initial_values:e.Vec(e.Tuple(t,n))})]}},"./src/candid/nns.did.js":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__,init:()=>init});const __WEBPACK_DEFAULT_EXPORT__=({IDL:e})=>{const t=e.Text,a=e.Record({name:e.Text,canister_id:e.Principal}),r=e.Variant({Ok:e.Null,CanisterAlreadyAttached:e.Null,NameAlreadyTaken:e.Null,NameTooLong:e.Null,CanisterLimitExceeded:e.Null}),n=e.Vec(e.Nat8),o=e.Record({name:e.Text,sub_account:n,account_identifier:t}),s=e.Variant({Ok:o,AccountNotFound:e.Null,NameTooLong:e.Null,SubAccountLimitExceeded:e.Null}),i=e.Record({canister_id:e.Principal}),c=e.Variant({Ok:e.Null,CanisterNotFound:e.Null}),d=e.Record({name:e.Text,account_identifier:t}),u=e.Record({account_identifier:t,hardware_wallet_accounts:e.Vec(d),sub_accounts:e.Vec(o)}),l=e.Variant({Ok:u,AccountNotFound:e.Null}),_=e.Record({name:e.Text,canister_id:e.Principal}),p=e.Nat64,m=e.Record({latest_transaction_block_height:p,seconds_since_last_ledger_sync:e.Nat64,sub_accounts_count:e.Nat64,hardware_wallet_accounts_count:e.Nat64,accounts_count:e.Nat64,earliest_transaction_block_height:p,transactions_count:e.Nat64,block_height_synced_up_to:e.Opt(e.Nat64),latest_transaction_timestamp_nanos:e.Nat64,earliest_transaction_timestamp_nanos:e.Nat64}),N=e.Record({page_size:e.Nat8,offset:e.Nat32,account_identifier:t}),f=e.Record({timestamp_nanos:e.Nat64}),y=e.Record({e8s:e.Nat64}),h=e.Record({to:t,fee:y,amount:y}),g=e.Record({fee:y,from:t,amount:y}),R=e.Variant({Burn:e.Record({amount:y}),Mint:e.Record({amount:y}),Send:h,Receive:g}),b=e.Record({memo:e.Nat64,timestamp:f,block_height:p,transfer:R}),w=e.Record({total:e.Nat32,transactions:e.Vec(b)}),T=e.Tuple(e.Text,e.Text),k=e.Record({url:e.Text,method:e.Text,body:e.Vec(e.Nat8),headers:e.Vec(T)}),v=e.Record({body:e.Vec(e.Nat8),headers:e.Vec(T),status_code:e.Nat16}),x=e.Record({name:e.Text,account_identifier:t}),O=e.Variant({Ok:e.Null,AccountNotFound:e.Null,HardwareWalletAlreadyRegistered:e.Null,HardwareWalletLimitExceeded:e.Null,NameTooLong:e.Null}),I=e.Record({account_identifier:t}),V=e.Variant({Ok:e.Null,HardwareWalletNotFound:e.Null}),A=e.Record({new_name:e.Text,account_identifier:t}),S=e.Variant({Ok:e.Null,AccountNotFound:e.Null,SubAccountNotFound:e.Null,NameTooLong:e.Null});return e.Service({add_account:e.Func([],[t],[]),attach_canister:e.Func([a],[r],[]),create_sub_account:e.Func([e.Text],[s],[]),detach_canister:e.Func([i],[c],[]),get_account:e.Func([],[l],["query"]),get_canisters:e.Func([],[e.Vec(_)],["query"]),get_icp_to_cycles_conversion_rate:e.Func([],[e.Nat64],["query"]),get_stats:e.Func([],[m],["query"]),get_transactions:e.Func([N],[w],["query"]),http_request:e.Func([k],[v],["query"]),register_hardware_wallet:e.Func([x],[O],[]),remove_hardware_wallet:e.Func([I],[V],[]),rename_sub_account:e.Func([A],[S],[])})},init=({IDL:e})=>[]},"./src/extjs.js":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a("@dfinity/agent"),n=a("@dfinity/principal"),o=a("./src/utils.js"),s=a("./src/candid/ledger.did.js"),i=a("./src/candid/governance.did.js"),c=a("./src/candid/nns.did.js"),d=a("./src/candid/hzld.did.js"),u=a("./src/candid/ext.did.js");const l=a("bip39"),constructUser=e=>(0,o.isHex)(e)&&64===e.length?{address:e}:{principal:n.Principal.fromText(e)},tokenIdentifier=(e,t)=>{const a=Buffer("\ntid"),r=new Uint8Array([...a,...n.Principal.fromText(e).toUint8Array(),...(0,o.to32bits)(t)]);return n.Principal.fromUint8Array(r).toText()},decodeTokenId=e=>{var t=[...n.Principal.fromText(e).toUint8Array()],a=t.splice(0,4);return(0,o.toHexString)(a)!==(0,o.toHexString)(Buffer("\ntid"))?{index:0,canister:e,token:tokenIdentifier(e,0)}:{index:(0,o.from32bits)(t.splice(-4)),canister:n.Principal.fromUint8Array(t).toText(),token:e}},_={governance:i.default,ledger:s.default,hzld:d.default,nns:c.default,ext:u.default,default:u.default};class ExtConnection{_mapIdls={[o.LEDGER_CANISTER_ID]:_.ledger,[o.GOVERNANCE_CANISTER_ID]:_.governance,[o.NNS_CANISTER_ID]:_.nns,"qz7gu-giaaa-aaaaf-qaaka-cai":_.hzld};_metadata={[o.LEDGER_CANISTER_ID]:{name:"ICP",symbol:"ICP",decimals:8,type:"fungible"},"qz7gu-giaaa-aaaaf-qaaka-cai":{name:"HZLD",symbol:"HZLD",decimals:0,type:"fungible"}};_identity=!1;_host=!1;_agent=!1;_canisters={};constructor(e,t){t&&(this._identity=t),e&&(this._host=e),this._makeAgent()}idl(e,t){return this._mapIdls[e]=t,this}setIdentity(e){return this._identity=e||!1,this._makeAgent(),this}setHost(e){return this._host=e||!1,this._makeAgent(),this}canister(e,t){if(t){if("string"==typeof t){if(!_.hasOwnProperty(t))throw new Error(t+" is not a preloaded IDL");t=_[t]}}else t=this._mapIdls.hasOwnProperty(e)?this._mapIdls[e]:_.default;return this._canisters.hasOwnProperty(e)||(this._canisters[e]=r.Actor.createActor(t,{agent:this._agent,canisterId:e})),this._canisters[e]}token(e,t){e||(e=o.LEDGER_CANISTER_ID);var a=decodeTokenId(e);t||(t=this._mapIdls.hasOwnProperty(a.canister)?this._mapIdls[a.canister]:_.ext);var r=this.canister(a.canister,t);return{call:r,fee:()=>new Promise(((e,t)=>{switch(a.canister){case o.LEDGER_CANISTER_ID:e(1e4);break;case"qz7gu-giaaa-aaaaf-qaaka-cai":e(1);break;default:e(0)}})),getMetadata:()=>new Promise(((e,t)=>{this._metadata.hasOwnProperty(a.canister)?e(this._metadata[a.canister]):(a.canister,r.metadata(a.token).then((a=>{void 0!==a.ok?void 0!==a.ok.fungible?e({name:a.ok.fungible.name,symbol:a.ok.fungible.symbol,decimals:a.ok.fungible.decimals,metadata:a.ok.fungible.metadata,type:"fungible"}):e({metadata:a.ok.nonfungible.metadata,type:"nonfungible"}):void 0!==a.err?t(a.err):t(a)})).catch(t))})),getBearer:()=>new Promise(((e,t)=>{r.bearer(a.token).then((a=>{void 0!==a.ok?e(a.ok):void 0!==a.err?t(a.err):t(a)})).catch(t)})),getBalance:(e,t)=>new Promise(((s,i)=>{var c;switch(a.canister){case o.LEDGER_CANISTER_ID:o.rosettaApi.getAccountBalance(e).then((e=>{s(e)}));break;case"qz7gu-giaaa-aaaaf-qaaka-cai":c={user:n.Principal.fromText(t)},r.getBalanceInsecure(c).then((e=>{var t=0===e.length?0:e[0];s(t)})).catch(i);break;default:c={user:constructUser(e),token:a.token},r.balance(c).then((e=>{void 0!==e.ok?s(e.ok):void 0!==e.err?i(e.err):i(e)})).catch(i)}})),getTransactions:(e,t)=>new Promise(((t,r)=>{switch(a.canister){case o.LEDGER_CANISTER_ID:o.rosettaApi.getTransactionsByAccount(e).then((e=>{Array.isArray(e)||t([]);var a=[];e.map((e=>"TRANSACTION"===e.type&&("COMPLETED"===e.status&&(a.push({from:e.account1Address,to:e.account2Address,amount:Number(e.amount)/10**8,fee:Number(e.fee)/10**8,hash:e.hash,timestamp:e.timestamp,memo:Number(e.memo)}),!0)))),t(a)})).catch(r);break;case"qz7gu-giaaa-aaaaf-qaaka-cai":default:t([])}})),transfer:(t,s,i,c,d,u,l)=>new Promise(((_,p)=>{var m;switch(a.canister){case o.LEDGER_CANISTER_ID:m={from_subaccount:[(0,o.getSubAccountArray)(s??0)],to:i,amount:{e8s:c},fee:{e8s:d},memo:u?Number(BigInt(u)):0,created_at_time:[]},r.send_dfx(m).then((e=>{_(!0)})).catch(p);break;case"qz7gu-giaaa-aaaaf-qaaka-cai":m={to:n.Principal.fromText(i),metadata:[],from:n.Principal.fromText(t),amount:c},r.transfer(m).then((e=>{void 0!==e.ok?_(!0):p(JSON.stringify(e.err))})).catch(p);break;default:m={token:e,from:{address:(0,o.principalToAccountIdentifier)(t,s??0)},subaccount:[(0,o.getSubAccountArray)(s??0)],to:constructUser(i),amount:c,fee:d,memo:(0,o.fromHexString)(u),notify:l},r.transfer(m).then((e=>{void 0!==e.ok?_(!0):p(JSON.stringify(e.err))})).catch(p)}})),mintCycles:(e,t,s,i,c)=>new Promise(((e,d)=>{switch(a.canister){case o.LEDGER_CANISTER_ID:var u=(0,o.getCyclesTopupSubAccount)(s),l=(0,o.principalToAccountIdentifier)(o.CYCLES_MINTING_CANISTER_ID,u),_={from_subaccount:[(0,o.getSubAccountArray)(t??0)],to:l,fee:{e8s:c},memo:Number(BigInt("0x50555054")),created_at_time:[],amount:{e8s:i}};r.send_dfx(_).then((a=>{var s={block_height:a,max_fee:{e8s:c},from_subaccount:[(0,o.getSubAccountArray)(t??0)],to_subaccount:[(0,o.getSubAccountArray)(u)],to_canister:n.Principal.fromText(o.CYCLES_MINTING_CANISTER_ID)};r.notify_dfx(s).then(e).catch(d)})).catch(d);break;case"5ymop-yyaaa-aaaah-qaa4q-cai":d("WIP");break;default:d("Cycle topup is not supported by this token")}}))}}_makeAgent(){var e={};this._identity&&(e.identity=this._identity),this._host&&(e.host=this._host),this._agent=new r.HttpAgent(e)}}const p={connect:(e,t)=>new ExtConnection(e??"https://boundary.ic0.app/",t),decodeTokenId,encodeTokenId:tokenIdentifier,constructUser,principalToAccountIdentifier:o.principalToAccountIdentifier,fromHexString:o.fromHexString,toHexString:o.toHexString,mnemonicToId:o.mnemonicToId,generateMnemonic:l.generateMnemonic}},"./src/utils.js":(e,t,a)=>{"use strict";a.r(t),a.d(t,{LEDGER_CANISTER_ID:()=>l,GOVERNANCE_CANISTER_ID:()=>_,NNS_CANISTER_ID:()=>p,CYCLES_MINTING_CANISTER_ID:()=>m,getCyclesTopupAddress:()=>getCyclesTopupAddress,getCyclesTopupSubAccount:()=>getCyclesTopupSubAccount,amountToBigInt:()=>amountToBigInt,rosettaApi:()=>N,Principal:()=>r.Principal,principalToAccountIdentifier:()=>principalToAccountIdentifier,getSubAccountArray:()=>getSubAccountArray,from32bits:()=>from32bits,to32bits:()=>to32bits,toHexString:()=>toHexString,fromHexString:()=>fromHexString,mnemonicToId:()=>mnemonicToId,encrypt:()=>encrypt,decrypt:()=>decrypt,isHex:()=>isHex,bip39:()=>d,validateAddress:()=>validateAddress,validatePrincipal:()=>validatePrincipal});var r=a("@dfinity/principal"),n=a("@dfinity/identity"),o=a("@dfinity/principal/lib/esm/utils/getCrc"),s=a("@dfinity/principal/lib/esm/utils/sha224"),i=a("./src/RosettaApi.js");const c=a("sjcl"),d=a("bip39"),u=a("pbkdf2"),l="ryjl3-tyaaa-aaaaa-aaaba-cai",_="rrkah-fqaaa-aaaaa-aaaaq-cai",p="qoctq-giaaa-aaaaa-aaaea-cai",m="rkp4c-7iaaa-aaaaa-aaaca-cai",N=new i.default,getCyclesTopupAddress=e=>principalToAccountIdentifier(m,getCyclesTopupSubAccount(e)),getCyclesTopupSubAccount=e=>{var t=Array.from(r.Principal.fromText(e).toUint8Array());return[t.length,...t]},amountToBigInt=(e,t)=>e=e<1?BigInt(e*10**t):BigInt(e)*BigInt(10**t),principalToAccountIdentifier=(e,t)=>{const a=Buffer("\naccount-id"),n=new Uint8Array([...a,...r.Principal.fromText(e).toUint8Array(),...getSubAccountArray(t)]),i=(0,s.sha224)(n),c=to32bits((0,o.getCrc32)(i)),d=new Uint8Array([...c,...i]);return toHexString(d)},getSubAccountArray=e=>Array.isArray(e)?e.concat(Array(32-e.length).fill(0)):Array(28).fill(0).concat(to32bits(e||0)),from32bits=e=>{for(var t,a=0;a<4;a++)t=t<<8|e[a];return t},to32bits=e=>{let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e),Array.from(new Uint8Array(t))},toHexString=e=>Array.from(e,(function(e){return("0"+(255&e).toString(16)).slice(-2)})).join(""),fromHexString=e=>{"0x"===e.substr(0,2)&&(e=e.substr(2));for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return t},mnemonicToId=e=>{var t=d.mnemonicToSeedSync(e);return t=(t=Array.from(t)).splice(0,32),t=new Uint8Array(t),n.Ed25519KeyIdentity.generate(t)},encrypt=(e,t,a)=>new Promise(((r,n)=>{u.pbkdf2(a,t,3e4,512,"sha512",((t,a)=>{if(t)return n(t);r(c.encrypt(a.toString(),btoa(e)))}))})),decrypt=(e,t,a)=>new Promise(((r,n)=>{u.pbkdf2(a,t,3e4,512,"sha512",((t,a)=>{if(t)return n(t);try{r(atob(c.decrypt(a.toString(),e)))}catch(t){n(t)}}))})),isHex=e=>/^[0-9a-fA-F]+$/.test(e),validateAddress=e=>isHex(e)&&64===e.length,validatePrincipal=e=>{try{return e===r.Principal.fromText(e).toText()}catch(e){return!1}}},"@dfinity/agent":e=>{"use strict";e.exports=require("@dfinity/agent")},"@dfinity/identity":e=>{"use strict";e.exports=require("@dfinity/identity")},"@dfinity/principal":e=>{"use strict";e.exports=require("@dfinity/principal")},"@dfinity/principal/lib/esm/utils/getCrc":e=>{"use strict";e.exports=require("@dfinity/principal/lib/esm/utils/getCrc")},"@dfinity/principal/lib/esm/utils/sha224":e=>{"use strict";e.exports=require("@dfinity/principal/lib/esm/utils/sha224")},axios:e=>{"use strict";e.exports=require("axios")},"bignumber.js":e=>{"use strict";e.exports=require("bignumber.js")},bip39:e=>{"use strict";e.exports=require("bip39")},"json-bigint":e=>{"use strict";e.exports=require("json-bigint")},pbkdf2:e=>{"use strict";e.exports=require("pbkdf2")},sjcl:e=>{"use strict";e.exports=require("sjcl")}},t={};function __webpack_require__(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a=__webpack_require__("./index.js");return a=a.default})()}));
//# sourceMappingURL=ext.node.js.map